{"version":3,"sources":["components/slider/index.js","App.js","serviceWorker.js","index.js","dataprocess/data/salaries-proccesed.csv"],"names":["Slider","props","min","max","step","defaultValue","variable","ordinalScale","updateChart","ref","useRef","useState","selectedValue","setSelectedValue","useEffect","margin","data","d3","map","d","key","value","svg","current","append","attr","xBand","domain","range","padding","xLinear","bandwidth","y","nice","bars","selectAll","barsEnter","enter","call","g","tickValues","tickFormat","select","remove","d3Slider","ticks","default","on","draw","selected","merge","Fragment","id","englishLevels","educationTitles","App","loading","setLoading","salaryMean","setSalaryMean","numberOfPeople","setNumberOfPeople","salaryData","setSalaryData","setFilteredData","React","filters","setFilters","name","prevState","salaryFile","then","csv","catch","error","newSalaryData","exchangeRate","filter","experience","length","className","Container","Grid","container","spacing","item","xs","sm","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","console","message","module","exports"],"mappings":"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","file":"static/js/main.dcd7221a.chunk.js","sourcesContent":["import React, { useState,useEffect, useRef }  from 'react';\nimport * as d3 from 'd3';\nimport * as d3Slider from 'd3-simple-slider';\nimport './styles.css';\n\n\n\nconst Slider = props => {\n\n    const {min,max,step,defaultValue,variable,ordinalScale,updateChart} = props;\n\n    const ref = useRef(null);\n    const [selectedValue, setSelectedValue] = useState(defaultValue);\n\n\n    useEffect(\n        () => {\n\n                // New York Times\n                const width = 320;\n                const height = 120;\n                const margin = { top: 20, right: 30, bottom: 50, left: 30 };\n                \n                const data = d3.range(min, max+1,step).map(d => ({\n                    key: d,\n                    value: d,\n                }));\n\n                const svg = d3.select(ref.current)\n                    .append('svg')\n                    .attr('width', width)\n                    .attr('height', height);\n\n                const padding = 0.1;\n\n                const xBand = d3\n                    .scaleBand()\n                    .domain(data.map(d => d.key))\n                    .range([margin.left, width - margin.right])\n                    .padding(padding);\n\n                const xLinear = d3\n                    .scaleLinear()\n                    .domain([\n                        d3.min(data, d => d.key),\n                        d3.max(data, d => d.key),\n                    ])\n                    .range([\n                        margin.left + xBand.bandwidth() / 2 + xBand.step() * padding - 0.5,\n                        width -\n                        margin.right -\n                        xBand.bandwidth() / 2 -\n                        xBand.step() * padding -\n                        0.5,\n                    ]);\n\n                const y = d3\n                    .scaleLinear()\n                    .domain([0, d3.max(data, d => d.value)])\n                    .nice()\n                    .range([height - margin.bottom, margin.top]);\n\n                const yAxis = g =>g.attr('transform', `translate(${width - margin.right},0)`)\n                            .call(d3.axisRight(y)\n                                .tickValues([1e4])\n                                .tickFormat(d3.format('($.2s'))\n                            )\n                            .call(g => g.select('.domain').remove());\n\n                const slider = g =>\n                g.attr('transform', `translate(0,${height - margin.bottom})`).call(\n                    d3Slider\n                    .sliderBottom(xLinear)\n                    .step(step)\n                    .ticks(4)\n                    .default(defaultValue)\n                    .on('onchange', value => draw(value))\n                );\n\n                const bars = svg\n                    .append('g')\n                    .selectAll('rect')\n                    .data(data);\n\n                const barsEnter = bars\n                    .enter()\n                    .append('rect')\n                    .attr('x', d => xBand(d.key))\n                    .attr('y', d => y(d.value))\n                    .attr('height', d => y(0) - y(d.value))\n                    .attr('width', xBand.bandwidth());\n\n                svg.append('g').call(yAxis);\n                svg.append('g').call(slider);\n\n                const draw = selected => {\n                    barsEnter\n                        .merge(bars)\n                        .attr('fill', d => (d.key === selected ? '#bad80a' : '#e0e0e0'));\n\n                    setSelectedValue(ordinalScale?ordinalScale[selected]:selected)\n                 \n                    updateChart(variable,selected);\n\n                };\n                draw(defaultValue);\n        },\n        []\n    );\n\n    return (\n        <React.Fragment>\n        <p>{selectedValue}</p>\n        <div id=\"slider-new-york-times\" ref={ref}></div>\n\n        </React.Fragment>\n\n    )\n\n}\n\nexport default Slider;","import React,{useState,useEffect} from 'react';\nimport Slider from './components/slider';\nimport {Container,Grid} from '@material-ui/core';\nimport * as d3 from 'd3';\n\nimport './App.css';\nimport salaryFile from './dataprocess/data/salaries-proccesed.csv'\n//let salaryData=null;\n\n\nconst maxSalary=1000000000\nconst englishLevels=['ninguno','básico (puede leer documentación y código en inglés)','intermedio (puede pasar una entrevista de programación en inglés)','avanzado (puede liderar una reunion de varias personas en inglés)','nativo']\nconst educationTitles=['ninguno','bachiller','técnico, tecnología, bachiller técnico','pregrado','maestria','doctorado','post-doctorado'];\nfunction App() {\n\n  const [loading, setLoading] = useState(true);\n  const [salaryMean, setSalaryMean] = useState(0);\n  const [numberOfPeople, setNumberOfPeople] = useState(0);\n  const [salaryData, setSalaryData] = useState(null);\n  const [filteredData, setFilteredData] = useState(null);\n  const [filters, setFilters] = React.useState({\n    \"exchangeRate\": 3000,\n    \"experience\":0,\n    \"english-level\":1,\n    \"max-title\":1\n  });\n  const processData=()=>{\n    d3.csv(salaryFile, (d)=> {\n      return {\n        \"currency\":d[\"currency\"],\n        \"min-experience\": +d[\"min-experience\"],\n        \"max-experience\": +d[\"max-experience\"],\n        \"english-level\": +d[\"english-level\"],\n        \"max-title\": +d[\"max-title\"],\n        \"income-in-currency\": +d[\"income-in-currency\"] \n      };\n    })\n    .then((csv)=>{\n\n      //console.log(\"csv\",csv[0])\n      setSalaryData(csv);\n      setLoading(false);\n\n    })\n    .catch((error)=>{\n       // handle error   \n    })\n  }\n\n\n  const updateChart=(name,value)=>{\n    setFilters(prevState => ({\n      ...prevState,\n      [name]: value\n    }));\n  }\n\n  useEffect(\n    () => {\n      processData(setSalaryData,setLoading)\n           \n    },\n    []\n  );\n\n  useEffect(\n    () => {\n      if(salaryData){\n        let newSalaryData=salaryData.map(d=>{\n            d[\"income-cop\"]=d[\"currency\"]===\"pesos\"?d[\"income-in-currency\"]:d[\"income-in-currency\"]*filters.exchangeRate;\n            return d;\n          })\n\n        newSalaryData=newSalaryData.filter(\n          d=>(d[\"income-cop\"]<=maxSalary &&\n          (filters.experience>=d[\"min-experience\"] && filters.experience<=d[\"max-experience\"]) &&\n          (filters['english-level']===d[\"english-level\"]) &&\n          (filters['max-title']===d[\"max-title\"])\n          )\n        )\n\n        setFilteredData(newSalaryData)\n        setSalaryMean(d3.mean(newSalaryData, d => d[\"income-cop\"]))\n        setNumberOfPeople(newSalaryData.length);\n      }\n          \n    },\n    [filters]\n  );\n\n  return (\n    <div className=\"App\">\n\n      {!loading && \n      <Container>\n        <Grid container spacing={3}>\n          <Grid item xs={12} sm={6}>\n          <b>¿Qué tasa de conversión de dólar deseas utilizar?</b>\n          <Slider variable=\"exchangeRate\" updateChart={updateChart} min={3000} defaultValue={3730} max={4000} step={10} />\n          <b>¿Cuántos años de experiencia tienes?</b>\n          <Slider variable=\"experience\" updateChart={updateChart}  min={0} defaultValue={5} max={15} step={1} />\n          <b>¿Cuál es tu nivel de ingles?</b>\n          <Slider variable=\"english-level\" updateChart={updateChart}  min={0} defaultValue={2} max={4} step={1} ordinalScale={englishLevels} />\n          <b>¿Cuál es tu máximo nivel de formación?</b>\n          <Slider variable=\"max-title\" updateChart={updateChart}  min={0} defaultValue={3} max={6} step={1} ordinalScale={educationTitles} />\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>\n          <h2>\n            <span>Hay {numberOfPeople} personas de la comunidad con un perfil parecido al tuyo</span>\n            {numberOfPeople>0 && <span> y ganan en promedio al año</span>}\n          </h2>\n          <h2>\n          {numberOfPeople>0 && <span>el equivalente a <h1>{d3.format(\"($,.0f\")(salaryMean)} pesos</h1></span>}\n          </h2>\n          </Grid>\n        </Grid>\n      </Container>\n       \n      }\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/salaries-proccesed.f91f2faf.csv\";"],"sourceRoot":""}